<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D å¤ªé˜³ç³»ï¼šé«˜äº®ç™¾ç§‘ç‰ˆ</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; font-family: "Microsoft YaHei", "Rounded Mplus 1c", sans-serif; }
        
        #canvas-container { width: 100vw; height: 100vh; display: block; }

        /* --- é¢æ¿æ ·å¼ --- */
        .info-panel {
            position: fixed; 
            bottom: 20px; 
            left: 20px; 
            width: 400px; /* ç¨å¾®åŠ å®½ä»¥å®¹çº³æ›´å¤šæ–‡å­— */
            max-width: 90vw;
            background: rgba(15, 20, 35, 0.95); /* èƒŒæ™¯è‰²åŠ æ·±ï¼Œå¯¹æ¯”åº¦æ›´é«˜ */
            backdrop-filter: blur(20px);
            border-radius: 20px; 
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 25px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.9);
            color: white; 
            z-index: 100; 
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            max-height: 85vh; 
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        /* æŠ˜å çŠ¶æ€ */
        .info-panel.minimized {
            max-height: 60px; 
            width: 220px;
            background: rgba(255, 215, 0, 0.9); /* æŠ˜å æ—¶å˜æˆé†’ç›®çš„é‡‘è‰² */
            color: black;
            padding: 10px 20px;
        }

        .info-panel.minimized .nav-bar,
        .info-panel.minimized .real-photo-container,
        .info-panel.minimized .data-grid,
        .info-panel.minimized #planetDesc,
        .info-panel.minimized .speak-btn,
        .info-panel.minimized .en-name {
            display: none; 
        }

        .info-panel.minimized h2 {
            font-size: 1.1rem;
            margin: 0;
            line-height: 40px;
            color: #000;
        }

        /* åˆ‡æ¢æŒ‰é’® */
        .toggle-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 30px; height: 30px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
            z-index: 102;
        }
        .toggle-btn:hover { background: white; color: black; }
        .info-panel.minimized .toggle-btn { color: black; border: 1px solid black; }

        /* å†…å®¹åŒº */
        .nav-bar { display: flex; gap: 12px; overflow-x: auto; padding-bottom: 15px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); flex-shrink: 0; }
        .nav-icon { width: 44px; height: 44px; border-radius: 50%; cursor: pointer; border: 3px solid rgba(255,255,255,0.2); transition: 0.2s; flex-shrink: 0; box-sizing: border-box; }
        .nav-icon:hover, .nav-icon.active { transform: scale(1.1); border-color: #ffd700; box-shadow: 0 0 15px #ffd700; }

        .scroll-content { overflow-y: auto; scrollbar-width: none; padding-right: 5px; }
        .scroll-content::-webkit-scrollbar { display: none; }

        .real-photo-container { width: 100%; height: 220px; border-radius: 12px; overflow: hidden; margin-bottom: 15px; position: relative; background: #000; flex-shrink: 0; border: 1px solid rgba(255,255,255,0.1); }
        .real-photo { width: 100%; height: 100%; object-fit: cover; }
        .photo-tag { position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.8); color: #fff; font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; }

        h2 { margin: 0 0 8px 0; color: #ffd700; font-size: 2rem; letter-spacing: 1px; flex-shrink: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .en-name { font-size: 1rem; color: #aaa; margin-left: 10px; font-weight: normal; }
        
        /* æ–‡å­—æè¿°ä¼˜åŒ– */
        p { font-size: 1.05rem; line-height: 1.8; color: #eee; margin: 15px 0; text-align: justify; text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
        
        .data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .data-item { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; font-size: 0.9rem; color: #fff; display: flex; flex-direction: column; }
        .data-label { color: #aaa; font-size: 0.75rem; margin-bottom: 4px; }

        .speak-btn { width: 100%; background: linear-gradient(135deg, #ff8c00, #ff4500); border: none; color: white; padding: 14px; border-radius: 30px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-top: 10px; flex-shrink: 0; box-shadow: 0 4px 15px rgba(255, 69, 0, 0.4); }
        .speak-btn:active { transform: scale(0.98); }

        #loading { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 1.5rem; pointer-events: none; z-index: 999; text-shadow: 0 0 20px #000; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>

    <div id="loading">ğŸš€ æ­£åœ¨ç‚¹äº®æ˜Ÿçƒ...</div>
    <div id="canvas-container"></div>

    <div class="info-panel" id="infoPanel">
        <button class="toggle-btn" id="toggleBtn" title="æŠ˜å é¢æ¿">â–¼</button>

        <div class="nav-bar" id="navBar"></div>
        <h2 id="planetName">å¤ªé˜³ç³» <span class="en-name">Solar System</span></h2>
        
        <div class="scroll-content">
            <div class="real-photo-container">
                <img id="planetPhoto" class="real-photo" src="" alt="è¡Œæ˜Ÿç…§ç‰‡">
                <div class="photo-tag">çœŸå®ç…§ç‰‡</div>
            </div>
            
            <div class="data-grid" id="planetData"></div>
            
            <p id="planetDesc">è¿™é‡Œæ˜¯æµ©ç€šçš„å¤ªé˜³ç³»ï¼æ‰€æœ‰çš„è¡Œæ˜Ÿéƒ½è¢«ç‚¹äº®å•¦ï¼Œå¿«çœ‹çœ‹å®ƒä»¬é²œè‰³çš„é¢œè‰²ï¼æ‹–åŠ¨å±å¹•ï¼Œç‚¹å‡»å®ƒä»¬ï¼Œå¬å¬å®ƒä»¬çš„æ•…äº‹å§ã€‚</p>
            
            <button class="speak-btn" id="speakBtn">ğŸ”Š å¬å¬ä»‹ç»</button>
        </div>
    </div>

    <script>
        // --- 1. æ•°æ®é…ç½® (æ–‡æ¡ˆå¤§å¹…æ‰©å…… + é¢œè‰²è°ƒä¼˜) ---
        const planetData = [
            {
                key: 'mercury', name: 'æ°´æ˜Ÿ', en: 'Mercury',
                size: 1, distance: 20, speed: 0.04, 
                baseColor: 0xCCCCCC, // äº®ç°
                texture: 'https://upload.wikimedia.org/wikipedia/commons/3/30/Mercury_mostly_true_color_MESSENGER_orthographic_projection.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Mercury_in_color_-_Prockter07-edit1.jpg/600px-Mercury_in_color_-_Prockter07-edit1.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '5800ä¸‡å…¬é‡Œ', 'æ¸©åº¦': 'å†°ç«ä¸¤é‡å¤©' },
                desc: 'æˆ‘æ˜¯æ°´æ˜Ÿï¼Œå¤ªé˜³ç³»é‡Œæœ€å°ã€è·‘å¾—æœ€å¿«çš„å¼Ÿå¼Ÿï¼å› ä¸ºæˆ‘ç¦»å¤ªé˜³å…¬å…¬å¤ªè¿‘äº†ï¼Œæ‰€ä»¥æˆ‘ä¸æ•¢ç©¿â€œè¡£æœâ€ï¼ˆå¤§æ°”å±‚ï¼‰ã€‚è¿™è®©æˆ‘è¿‡ç€â€œå†°ç«ä¸¤é‡å¤©â€çš„ç”Ÿæ´»ï¼šç™½å¤©å¤ªé˜³æ™’ç€æˆ‘ï¼Œæ¸©åº¦é«˜å¾—èƒ½çƒ¤åŒ–é“…å—ï¼›åˆ°äº†æ™šä¸Šï¼Œæˆ‘åˆä¼šç¬é—´å†»æˆå†°æ£ï¼Œæ¸©å·®æœ‰600å¤šåº¦å‘¢ï¼æˆ‘èº«ä¸Šå¸ƒæ»¡äº†å‘å‘æ´¼æ´¼çš„é™¨çŸ³å‘ï¼Œé‚£æ˜¯ä»¥å‰è¢«å°çŸ³å¤´æ’å‡»ç•™ä¸‹çš„ä¼¤ç–¤ï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆåƒæœˆäº®ï¼Ÿ'
            },
            {
                key: 'venus', name: 'é‡‘æ˜Ÿ', en: 'Venus',
                size: 1.8, distance: 28, speed: 0.015, 
                baseColor: 0xFFA500, // äº®æ©™è‰²
                texture: 'https://upload.wikimedia.org/wikipedia/commons/1/1c/Solarsystemscope_texture_2k_venus_surface.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/e/e5/Venus-real_color.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '1.08äº¿å…¬é‡Œ', 'ç‰¹ç‚¹': 'è¶…çº§çƒ­' },
                desc: 'æˆ‘æ˜¯é‡‘æ˜Ÿï¼Œå¤œç©ºä¸­æœ€é—ªäº®çš„æ˜æ˜Ÿï¼å¤§å®¶éƒ½å«æˆ‘â€œå¯æ˜æ˜Ÿâ€ã€‚åƒä¸‡åˆ«è¢«æˆ‘ç¾ä¸½çš„å¤–è¡¨éª—äº†ï¼Œæˆ‘çš„è„¾æ°”å¯ç«çˆ†å•¦ï¼æˆ‘ç©¿ç€åšåšçš„é»„è‰²äº‘å½©å¤§è¡£ï¼ˆäºŒæ°§åŒ–ç¢³ï¼‰ï¼Œçƒ­é‡æ•£ä¸å‡ºå»ï¼Œæ‰€ä»¥æˆ‘æ¯”ç¦»å¤ªé˜³æ›´è¿‘çš„æ°´æ˜Ÿè¿˜è¦çƒ­ï¼Œæ˜¯çœŸæ­£çš„â€œç«ç„°å±±â€ã€‚è€Œä¸”æˆ‘éå¸¸ä»»æ€§ï¼Œå…¶ä»–è¡Œæ˜Ÿéƒ½é€†æ—¶é’ˆè½¬ï¼Œåªæœ‰æˆ‘æ˜¯é¡ºæ—¶é’ˆè½¬çš„ï¼Œæ‰€ä»¥åœ¨é‡‘æ˜Ÿä¸Šï¼Œå¤ªé˜³æ˜¯ä»è¥¿è¾¹å‡èµ·çš„å“¦ï¼'
            },
            {
                key: 'earth', name: 'åœ°çƒ', en: 'Earth',
                size: 1.9, distance: 38, speed: 0.01, 
                baseColor: 0x00BFFF, // é²œäº®çš„å¤©è“
                texture: 'https://upload.wikimedia.org/wikipedia/commons/c/cf/Solarsystemscope_texture_2k_earth_daymap.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/600px-The_Earth_seen_from_Apollo_17.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '1.5äº¿å…¬é‡Œ', 'æˆåˆ†': '70%æ˜¯æ°´' },
                desc: 'æˆ‘æ˜¯åœ°çƒï¼Œæ˜¯ä½ ä»¬æœ€çè´µçš„å®¶å›­ã€‚ä»å¤ªç©ºçœ‹ï¼Œæˆ‘åƒä¸€é¢—è“ç™½ç›¸é—´çš„ç»ç’ƒå¼¹ç ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘è¡¨é¢70%éƒ½æ˜¯è“è‰²çš„æµ·æ´‹ï¼Œè¿˜æœ‰ç™½è‰²çš„äº‘æœµåœ¨é£˜åŠ¨ã€‚æˆ‘æ˜¯å¤ªé˜³ç³»é‡Œå”¯ä¸€çŸ¥é“æœ‰ç”Ÿå‘½å­˜åœ¨çš„åœ°æ–¹ï¼Œæœ‰èŠ±è‰æ ‘æœ¨ï¼Œè¿˜æœ‰å¯çˆ±çš„å°åŠ¨ç‰©ã€‚æˆ‘è¿˜æœ‰ä¸€ä¸ªå¥½ä¿é•–å«â€œæœˆçƒâ€ï¼Œå®ƒä¸€ç›´é™ªç€æˆ‘è½¬åœˆåœˆï¼Œå¸®æˆ‘é˜»æŒ¡é™¨çŸ³ï¼Œè¿˜èƒ½å¼•èµ·æµ·æ°´çš„æ¶¨æ½®å’Œé€€æ½®å‘¢ã€‚'
            },
            {
                key: 'mars', name: 'ç«æ˜Ÿ', en: 'Mars',
                size: 1.2, distance: 50, speed: 0.008, 
                baseColor: 0xFF4500, // é²œçº¢
                texture: 'https://upload.wikimedia.org/wikipedia/commons/7/70/Solarsystemscope_texture_2k_mars.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/OSIRIS_Mars_true_color.jpg/600px-OSIRIS_Mars_true_color.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '2.28äº¿å…¬é‡Œ', 'é¢œè‰²': 'é“é”ˆçº¢' },
                desc: 'æˆ‘æ˜¯ç«æ˜Ÿï¼Œå¤§å®¶éƒ½å«æˆ‘â€œçº¢è‰²æ˜Ÿçƒâ€ã€‚ä¸ºä»€ä¹ˆæ˜¯çº¢è‰²çš„å‘¢ï¼Ÿå› ä¸ºæˆ‘å…¨èº«çš„åœŸå£¤é‡Œéƒ½ç”Ÿé”ˆå•¦ï¼ˆæ°§åŒ–é“ï¼‰ï¼è™½ç„¶æˆ‘ç°åœ¨æ˜¯ä¸ªå¯’å†·çš„æ²™æ¼ ï¼Œä½†æˆ‘æœ‰ä¸¤æ ·å¾ˆå‰å®³çš„ä¸œè¥¿ï¼šä¸€æ˜¯å…¨å¤ªé˜³ç³»æœ€å¤§çš„å³¡è°·ï¼Œå«â€œæ°´æ‰‹å·å³¡è°·â€ï¼›äºŒæ˜¯å…¨å¤ªé˜³ç³»æœ€é«˜çš„ç«å±±ï¼Œå«â€œå¥¥æ—å¸•æ–¯å±±â€ï¼Œæ¯”ä¸‰ä¸ªç ç©†æœ—ç›å³°å èµ·æ¥è¿˜è¦é«˜ï¼ç°åœ¨æœ‰å¥½å‡ è¾†äººç±»æ´¾æ¥çš„å°ç«æ˜Ÿè½¦æ­£åœ¨æˆ‘èº«ä¸Šåˆ°å¤„æ¢é™©å‘¢ã€‚'
            },
            {
                key: 'jupiter', name: 'æœ¨æ˜Ÿ', en: 'Jupiter',
                size: 5.5, distance: 75, speed: 0.004, 
                baseColor: 0xF0E68C, // äº®å¡å…¶è‰²
                texture: 'https://upload.wikimedia.org/wikipedia/commons/e/e4/Jupiter_Hubble_2019_Select.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2b/Jupiter_and_its_shrunken_Great_Red_Spot.jpg/600px-Jupiter_and_its_shrunken_Great_Red_Spot.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '7.78äº¿å…¬é‡Œ', 'å¤§å°': 'ä½“ç§¯æœ€å¤§' },
                desc: 'æˆ‘æ˜¯æœ¨æ˜Ÿï¼Œè¡Œæ˜Ÿé‡Œçš„â€œå·¨äººå¤§å“¥â€ï¼æˆ‘çš„è‚šå­å¤§åˆ°èƒ½è£…ä¸‹1300ä¸ªåœ°çƒã€‚æˆ‘å…¶å®æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ°”ä½“çƒï¼Œå¦‚æœä½ è¸©åœ¨æˆ‘èº«ä¸Šï¼Œä¼šç›´æ¥æ‰è¿›å»çš„ã€‚çœ‹åˆ°æˆ‘è‚šå­ä¸Šé‚£ä¸ªå¤§å¤§çš„çº¢çœ¼ç›äº†å—ï¼Ÿé‚£å«â€œå¤§çº¢æ–‘â€ï¼Œæ˜¯ä¸€ä¸ªåˆ®äº†å‡ ç™¾å¹´çš„è¶…çº§å¤§é£æš´ï¼Œé£åŠ›æ¯”åœ°çƒä¸Šçš„å°é£å¤§å¾—å¤šã€‚æˆ‘è¿˜æ˜¯å¤ªé˜³ç³»çš„â€œå¸å°˜å™¨â€ï¼Œç”¨å¼ºå¤§çš„å¼•åŠ›æŠŠå¾ˆå¤šå±é™©çš„é™¨çŸ³å¸è¿‡æ¥ï¼Œä¿æŠ¤äº†åœ°çƒå¼Ÿå¼Ÿçš„å®‰å…¨ã€‚'
            },
            {
                key: 'saturn', name: 'åœŸæ˜Ÿ', en: 'Saturn',
                size: 4.5, distance: 100, speed: 0.003, 
                baseColor: 0xFFD700, // é‡‘è‰²
                hasRing: true,
                texture: 'https://upload.wikimedia.org/wikipedia/commons/0/03/Solarsystemscope_texture_2k_saturn.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Saturn_during_Equinox.jpg/640px-Saturn_during_Equinox.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '14äº¿å…¬é‡Œ', 'ç‰¹å¾': 'æœ€ç¾å…‰ç¯' },
                desc: 'æˆ‘æ˜¯åœŸæ˜Ÿï¼Œæˆ‘æ˜¯å®‡å®™ä¸­æœ€ä¼˜é›…çš„èˆè€…ã€‚æˆ‘ä¹Ÿæœ‰ä¸€ä»¶æ°”ä½“åšçš„è¡£æœï¼Œä½†æˆ‘æœ€è‡ªè±ªçš„æ˜¯è…°é—´é‚£ä¸ªå®½å®½å¤§å¤§çš„å…‰ç¯ï¼è™½ç„¶è¿œè¿œçœ‹ç€åƒä¸€ä¸ªç›˜å­ï¼Œå…¶å®å®ƒæ˜¯ç”±æ— æ•°çš„å†°å—å’Œå²©çŸ³ç¢ç‰‡ç»„æˆçš„ï¼Œå®ƒä»¬éƒ½åœ¨å›´ç€æˆ‘è·³èˆã€‚è™½ç„¶æˆ‘ä¸ªå¤´å¾ˆå¤§ï¼Œä½†æˆ‘éå¸¸â€œè™šèƒ–â€ï¼Œå¯†åº¦å¾ˆå°ã€‚å¦‚æœå®‡å®™ä¸­æœ‰ä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ¾¡ç›†ï¼ŒæŠŠæˆ‘æ”¾è¿›å»ï¼Œæˆ‘ç”šè‡³èƒ½æµ®åœ¨æ°´é¢ä¸Šæ´—æ¾¡å‘¢ï¼'
            },
            {
                key: 'uranus', name: 'å¤©ç‹æ˜Ÿ', en: 'Uranus',
                size: 3.0, distance: 125, speed: 0.002, 
                baseColor: 0x00FFFF, // é’è‰²
                texture: 'https://upload.wikimedia.org/wikipedia/commons/9/95/Solarsystemscope_texture_2k_uranus.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Uranus2.jpg/600px-Uranus2.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '29äº¿å…¬é‡Œ', 'æ°”å‘³': 'è‡­é¸¡è›‹å‘³' },
                desc: 'æˆ‘æ˜¯å¤©ç‹æ˜Ÿï¼Œä¸€é¢—æ¼‚äº®çš„è“ç»¿è‰²å†°çƒã€‚æˆ‘å’Œåˆ«çš„æ˜Ÿæ˜Ÿéƒ½ä¸ä¸€æ ·ï¼Œæˆ‘æ˜¯â€œèººç€â€è½¬åœˆçš„ï¼Œå°±åƒåœ¨è½¨é“ä¸Šæ‰“æ»šä¸€æ ·ï¼è¿™ä¹Ÿè®©æˆ‘ç»å†äº†éå¸¸æ¼«é•¿çš„å†¬å¤©å’Œå¤å¤©ï¼Œä¸€ä¸ªå­£èŠ‚è¦æŒç»­21å¹´ã€‚ç§‘å­¦å®¶å‘ç°æˆ‘çš„å¤§æ°”å±‚é‡Œæœ‰ä¸€äº›ç‰¹æ®Šçš„æˆåˆ†ï¼Œæ‰€ä»¥å¦‚æœä½ èƒ½é—»åˆ°æˆ‘çš„å‘³é“ï¼Œå¯èƒ½ä¼šè§‰å¾—åƒè‡­é¸¡è›‹ä¸€æ ·éš¾é—»å“¦ï¼è¿™é‡Œéå¸¸å¯’å†·ï¼Œè¢«å¤§å®¶ç§°ä¸ºâ€œå†°å·¨æ˜Ÿâ€ã€‚'
            },
            {
                key: 'neptune', name: 'æµ·ç‹æ˜Ÿ', en: 'Neptune',
                size: 2.9, distance: 150, speed: 0.001, 
                baseColor: 0x4169E1, // çš‡å®¶è“
                texture: 'https://upload.wikimedia.org/wikipedia/commons/1/1e/Solarsystemscope_texture_2k_neptune.jpg',
                photo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Neptune_-_Voyager_2_%2829347980845%29_flatten_crop.jpg/600px-Neptune_-_Voyager_2_%2829347980845%29_flatten_crop.jpg',
                data: { 'è·ç¦»å¤ªé˜³': '45äº¿å…¬é‡Œ', 'ç‰¹å¾': 'å¤§é£æš´' },
                desc: 'æˆ‘æ˜¯æµ·ç‹æ˜Ÿï¼Œç¦»å¤ªé˜³æœ€è¿œï¼Œæ‰€ä»¥æˆ‘æ˜¯ç¥ç§˜çš„æ·±è“è‰²ã€‚æˆ‘è¿™é‡Œéå¸¸æš—ï¼Œæ˜¯è‚‰çœ¼çœ‹ä¸åˆ°çš„ï¼Œç§‘å­¦å®¶æ˜¯å…ˆç”¨æ•°å­¦ç®—å‡ºäº†æˆ‘çš„ä½ç½®ï¼Œæ‰æ‰¾åˆ°æˆ‘çš„ï¼Œæ‰€ä»¥æˆ‘å«â€œç¬”å°–ä¸‹çš„è¡Œæ˜Ÿâ€ã€‚æˆ‘è„¾æ°”å¾ˆæš´èºï¼Œæœ‰ç€å¤ªé˜³ç³»é‡Œæœ€å¿«çš„é£ï¼Œé£é€Ÿå¿«åˆ°èƒ½æŠŠå¤§æ ‘è¿æ ¹æ‹”èµ·ï¼å› ä¸ºè·¯é€”å¤ªé¥è¿œï¼Œæˆ‘ç»•å¤ªé˜³è·‘ä¸€åœˆï¼Œåœ°çƒä¸Šå°±è¦è¿‡å»165å¹´ï¼Œä¹Ÿå°±æ˜¯å¥½å‡ ä»£äººçš„æ—¶é—´å‘¢ã€‚'
            }
        ];

        // --- 2. Three.js åœºæ™¯åˆå§‹åŒ– ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 90, 150); 

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.maxDistance = 400;

        // --- 3. è§†è§‰å¼ºåŒ–ï¼šå¼ºå…‰ç…§è®¾ç½® ---
        // ç¯å¢ƒå…‰ï¼šå¤§å¹…å¢å¼ºï¼Œç¡®ä¿èƒŒå…‰é¢ä¹Ÿæœ‰é¢œè‰²
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.2); 
        scene.add(ambientLight);

        // ç‚¹å…‰æºï¼ˆå¤ªé˜³ï¼‰ï¼šå¢å¼ºå¼ºåº¦
        const pointLight = new THREE.PointLight(0xffffff, 2.0, 600);
        scene.add(pointLight);

        // æ˜Ÿç©ºèƒŒæ™¯
        const starGeo = new THREE.BufferGeometry();
        const starCount = 8000;
        const starPos = new Float32Array(starCount * 3);
        for(let i=0; i<starCount*3; i++) starPos[i] = (Math.random() - 0.5) * 1000;
        starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
        const starMat = new THREE.PointsMaterial({color: 0xffffff, size: 0.8, transparent: true, opacity: 0.8});
        scene.add(new THREE.Points(starGeo, starMat));

        const loader = new THREE.TextureLoader();
        const planetMeshes = [];

        // å¤ªé˜³
        const sunMat = new THREE.MeshBasicMaterial({ 
            map: loader.load('https://upload.wikimedia.org/wikipedia/commons/9/99/Map_of_the_full_sun.jpg'), 
            color: 0xffeebb 
        });
        const sun = new THREE.Mesh(new THREE.SphereGeometry(12, 64, 64), sunMat);
        scene.add(sun);
        // å¤ªé˜³å…‰æ™•
        const sunGlow = new THREE.Mesh(
            new THREE.SphereGeometry(14, 64, 64), 
            new THREE.MeshBasicMaterial({ color: 0xffaa00, transparent: true, opacity: 0.4, side: THREE.BackSide })
        );
        scene.add(sunGlow);

        // --- 4. åˆ›å»ºè¡Œæ˜Ÿ (è§†è§‰æ ¸å¿ƒè°ƒæ•´) ---
        planetData.forEach(p => {
            // è½¨é“çº¿ï¼šåŠ ç²—ã€åŠ äº®
            const orbitGeo = new THREE.RingGeometry(p.distance - 0.4, p.distance + 0.4, 128);
            const orbitMat = new THREE.MeshBasicMaterial({ 
                color: p.baseColor, 
                opacity: 0.5, // æé«˜ä¸é€æ˜åº¦
                transparent: true, 
                side: THREE.DoubleSide 
            });
            const orbit = new THREE.Mesh(orbitGeo, orbitMat);
            orbit.rotation.x = -Math.PI / 2;
            scene.add(orbit);

            // è¡Œæ˜Ÿæè´¨ï¼šä½¿ç”¨ MeshStandardMaterial + Emissive (è‡ªå‘å…‰)
            // è¿™æ ·å³ä½¿åœ¨é»‘æš—ä¸­ï¼Œè¡Œæ˜Ÿä¹Ÿä¼šå‘å‡ºè‡ªèº«çš„é¢œè‰²å…‰
            const geometry = new THREE.SphereGeometry(p.size, 64, 64);
            const material = new THREE.MeshStandardMaterial({
                map: loader.load(p.texture),
                color: 0xffffff, // åŸºç¡€è‰²
                roughness: 0.5,
                metalness: 0.1,
                emissive: p.baseColor, // æ ¸å¿ƒï¼šè®¾ç½®è‡ªå‘å…‰é¢œè‰²
                emissiveIntensity: 0.45 // æ ¸å¿ƒï¼šå¼ºåº¦é€‚ä¸­ï¼Œæ—¢èƒ½çœ‹æ¸…åˆä¸å¤±ç«‹ä½“æ„Ÿ
            });
            
            const mesh = new THREE.Mesh(geometry, material);
            const startAngle = Math.random() * Math.PI * 2;
            mesh.position.set(Math.cos(startAngle) * p.distance, 0, Math.sin(startAngle) * p.distance);
            scene.add(mesh);

            if (p.hasRing) {
                const ringMat = new THREE.MeshBasicMaterial({ 
                    map: loader.load('https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Saturn_ring_texture.jpg/220px-Saturn_ring_texture.jpg'),
                    color: 0xeeeeee, 
                    side: THREE.DoubleSide, 
                    transparent: true, 
                    opacity: 0.9 
                });
                const ring = new THREE.Mesh(new THREE.RingGeometry(p.size * 1.4, p.size * 2.3, 64), ringMat);
                ring.rotation.x = -Math.PI / 2;
                mesh.add(ring);
            }

            planetMeshes.push({ mesh: mesh, data: p, angle: startAngle, distance: p.distance, speed: p.speed });
        });

        document.getElementById('loading').style.display = 'none';

        function animate() {
            requestAnimationFrame(animate);
            sun.rotation.y += 0.003;
            planetMeshes.forEach(obj => {
                obj.angle += obj.speed * 0.15; // é€Ÿåº¦å¾®è°ƒ
                obj.mesh.position.x = Math.cos(obj.angle) * obj.distance;
                obj.mesh.position.z = Math.sin(obj.angle) * obj.distance;
                obj.mesh.rotation.y += 0.015;
            });
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // --- 5. UI äº¤äº’é€»è¾‘ ---
        const panel = document.getElementById('infoPanel');
        const toggleBtn = document.getElementById('toggleBtn');
        let isMinimized = false;

        toggleBtn.onclick = function() {
            isMinimized = !isMinimized;
            if (isMinimized) {
                panel.classList.add('minimized');
                toggleBtn.innerHTML = 'â–²';
            } else {
                panel.classList.remove('minimized');
                toggleBtn.innerHTML = 'â–¼';
            }
        };

        const navBar = document.getElementById('navBar');
        planetData.forEach(p => {
            const icon = document.createElement('div');
            icon.className = 'nav-icon';
            icon.style.backgroundColor = '#' + p.baseColor.toString(16);
            icon.style.backgroundImage = `url(${p.texture})`;
            icon.style.backgroundSize = 'cover';
            icon.title = p.name;
            icon.onclick = () => updateInfo(p);
            navBar.appendChild(icon);
        });

        // å°„çº¿æ£€æµ‹
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        
        window.addEventListener('click', (event) => {
            if(event.target.closest('.info-panel')) return;

            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(planetMeshes.map(p => p.mesh));
            if (intersects.length > 0) {
                const target = intersects[0].object;
                const found = planetMeshes.find(p => p.mesh === target || (target.parent && p.mesh === target.parent));
                if (found) {
                    if (isMinimized) toggleBtn.click();
                    updateInfo(found.data);
                }
            }
        });

        const photoEl = document.getElementById('planetPhoto');
        const nameEl = document.getElementById('planetName');
        const dataEl = document.getElementById('planetData');
        const descEl = document.getElementById('planetDesc');
        const speakBtn = document.getElementById('speakBtn');
        let synth = window.speechSynthesis;
        let isSpeaking = false;

        // é»˜è®¤æ˜¾ç¤ºå¤ªé˜³å›¾ç‰‡
        photoEl.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg/600px-The_Sun_by_the_Atmospheric_Imaging_Assembly_of_NASA%27s_Solar_Dynamics_Observatory_-_20100819.jpg";

        function updateInfo(data) {
            stopSpeech();
            photoEl.style.opacity = 0;
            setTimeout(() => {
                photoEl.src = data.photo;
                photoEl.onload = () => photoEl.style.opacity = 1;
            }, 200);
            nameEl.innerHTML = `${data.name} <span class="en-name">${data.en}</span>`;
            dataEl.innerHTML = Object.entries(data.data).map(([k,v]) => `<div class="data-item"><span class="data-label">${k}</span><span>${v}</span></div>`).join('');
            descEl.innerText = data.desc;
            
            document.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
            const idx = planetData.indexOf(data);
            if(document.querySelectorAll('.nav-icon')[idx]) document.querySelectorAll('.nav-icon')[idx].classList.add('active');

            speakBtn.innerHTML = 'ğŸ”Š å¬å¬ä»‹ç»';
            speakBtn.onclick = () => toggleSpeech(data.desc);
        }

        function toggleSpeech(text) {
            if (isSpeaking) {
                stopSpeech();
            } else {
                stopSpeech();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'zh-CN'; u.rate = 0.95; u.pitch = 1.05;
                u.onend = () => { isSpeaking = false; speakBtn.innerHTML = 'ğŸ”Š å¬å¬ä»‹ç»'; };
                synth.speak(u);
                isSpeaking = true;
                speakBtn.innerHTML = 'â¸ï¸ æš‚åœæœ—è¯»';
            }
        }
        function stopSpeech() {
            if (synth.speaking || synth.pending) synth.cancel();
            isSpeaking = false;
            speakBtn.innerHTML = 'ğŸ”Š å¬å¬ä»‹ç»';
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>